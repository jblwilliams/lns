# Multi-Service Docker Caddyfile
# Routes multiple services through a single Caddy instance

{
    auto_https off
    http_port 80
}

# Next.js Frontend
http://app.localhost:80 {
    reverse_proxy nextjs:3000 {
        header_up Host {host}
        header_up X-Real-IP {remote_host}
        header_up X-Forwarded-For {remote_host}
        header_up X-Forwarded-Proto {scheme}
    }
}

# FastAPI Backend
http://api.localhost:80 {
    reverse_proxy fastapi:8000
}

# Optional: Admin tools
# http://pgadmin.localhost:80 {
#     reverse_proxy pgadmin:80
# }
